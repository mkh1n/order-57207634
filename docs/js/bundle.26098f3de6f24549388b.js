(()=>{var e={120:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function r(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentStep=1,this.totalSteps=5,this.answers={},this.init()},t=[{key:"init",value:function(){this.updateProgress(),this.bindEvents(),this.setMinDate()}},{key:"setMinDate",value:function(){var e=(new Date).toISOString().split("T")[0];document.querySelector('input[name="merch-deadline"]').min=e}},{key:"bindEvents",value:function(){var e=this;document.querySelectorAll(".quiz-btn.next").forEach(function(t){t.addEventListener("click",function(){return e.nextStep()})}),document.querySelector(".quiz-btn.submit").addEventListener("click",function(){return e.submitQuiz()}),document.querySelectorAll('.quiz-option input[type="checkbox"], .quiz-option input[type="radio"]').forEach(function(t){t.addEventListener("change",function(t){return e.handleOptionSelect(t.target)})}),document.querySelectorAll(".quiz-input").forEach(function(t){t.addEventListener("input",function(t){return e.handleInputChange(t.target)}),t.addEventListener("blur",function(t){return e.validateInput(t.target)})})}},{key:"handleOptionSelect",value:function(e){var t=e.closest(".quiz-option");"checkbox"===e.type?e.checked?t.classList.add("selected"):t.classList.remove("selected"):(t.closest(".quiz-options").querySelectorAll(".quiz-option").forEach(function(e){return e.classList.remove("selected")}),t.classList.add("selected")),this.updateButtonState()}},{key:"handleInputChange",value:function(e){var t=e.nextElementSibling;t&&t.classList.contains("error-message")&&(t.style.display="none",e.classList.remove("error"))}},{key:"validateInput",value:function(e){var t=!0,n=e.value.trim(),r=e.nextElementSibling;if(!r||!r.classList.contains("error-message"))return!0;switch(e.name){case"merch-circulation":(!n||parseInt(n)<50)&&(t=!1,r.textContent="Тираж должен быть не менее 50 шт");break;case"merch-deadline":n?new Date(n)<(new Date).setHours(0,0,0,0)&&(t=!1,r.textContent="Дата не может быть раньше сегодняшнего дня"):(t=!1,r.textContent="Пожалуйста, укажите дату")}return t?(r.style.display="none",e.classList.remove("error")):(r.style.display="block",e.classList.add("error")),this.updateButtonState(),t}},{key:"updateButtonState",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]')),t=e.querySelector(".quiz-btn.next"),n=e.querySelector(".quiz-btn.submit"),r=!1;switch(this.currentStep){case 1:case 2:r=e.querySelectorAll('input[type="checkbox"]:checked').length>0;break;case 3:r=!!e.querySelector('input[type="radio"]:checked');break;case 4:var a=e.querySelector('input[name="merch-circulation"]');r=a.value&&parseInt(a.value)>=50;break;case 5:var s=e.querySelector('input[name="merch-deadline"]');r=s.value&&new Date(s.value)>=(new Date).setHours(0,0,0,0)}t&&(t.disabled=!r),n&&(n.disabled=!r)}},{key:"collectAnswers",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]'));switch(this.currentStep){case 1:var t=Array.from(e.querySelectorAll('input[name="merch-for"]:checked')).map(function(e){return e.value});this.answers.merchFor=t;break;case 2:var n=Array.from(e.querySelectorAll('input[name="merch-event"]:checked')).map(function(e){return e.value});this.answers.merchEvent=n;break;case 3:var r=e.querySelector('input[name="merch-design"]:checked');this.answers.merchDesign=r?r.value:null;break;case 4:var a=e.querySelector('input[name="merch-circulation"]').value;this.answers.circulation=a;break;case 5:var s=e.querySelector('input[name="merch-deadline"]').value;this.answers.deadline=s}}},{key:"nextStep",value:function(){this.currentStep>=this.totalSteps||(this.collectAnswers(),this.currentStep++,this.showStep())}},{key:"prevStep",value:function(){this.currentStep<=1||(this.currentStep--,this.showStep())}},{key:"showStep",value:function(){document.querySelectorAll(".quiz-step").forEach(function(e){e.classList.remove("active")}),document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]')).classList.add("active"),this.updateProgress(),this.updateButtonState(),this.restoreAnswers()}},{key:"restoreAnswers",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]'));switch(this.currentStep){case 1:this.answers.merchFor&&this.answers.merchFor.forEach(function(t){var n=e.querySelector('input[value="'.concat(t,'"]'));n&&(n.checked=!0,n.closest(".quiz-option").classList.add("selected"))});break;case 2:this.answers.merchEvent&&this.answers.merchEvent.forEach(function(t){var n=e.querySelector('input[value="'.concat(t,'"]'));n&&(n.checked=!0,n.closest(".quiz-option").classList.add("selected"))});break;case 3:if(this.answers.merchDesign){var t=e.querySelector('input[value="'.concat(this.answers.merchDesign,'"]'));t&&(t.checked=!0,t.closest(".quiz-option").classList.add("selected"))}break;case 4:this.answers.circulation&&(e.querySelector('input[name="merch-circulation"]').value=this.answers.circulation);break;case 5:this.answers.deadline&&(e.querySelector('input[name="merch-deadline"]').value=this.answers.deadline)}}},{key:"updateProgress",value:function(){var e=document.getElementById("progressFill"),t=(document.getElementById("progressText"),100-(this.currentStep-1)/(this.totalSteps-1)*100);e.style.width="calc(".concat(t,"% - 20%")}},{key:"submitQuiz",value:function(){this.collectAnswers(),n(n({},this.answers),{},{timestamp:(new Date).toISOString()}),this.showCaptureForm()}},{key:"showCaptureForm",value:function(){document.querySelector(".quiz-container").style.display="none";var e=this.createCaptureForm();document.body.appendChild(e)}},{key:"createCaptureForm",value:function(){var e=document.createElement("div");return e.className="quiz-container",e.innerHTML='\n                    <div class="quiz-progress">\n                        <div class="progress-bar">\n                            <div class="progress-fill" style="width: 0%"></div>\n                        </div>\n                        <div class="progress-text">Дополнительная информация</div>\n                    </div>\n\n                    <form id="captureForm">\n                        \x3c!-- Вопрос 6 - Контактные данные --\x3e\n                        <div class="quiz-step active" data-step="6">\n                            <h3 class="quiz-question">ВАШИ КОНТАКТНЫЕ ДАННЫЕ</h3>\n                            <input type="text" class="quiz-input" name="user-name" placeholder="Ваше имя" required>\n                            <div class="error-message" id="nameError">Пожалуйста, введите ваше имя</div>\n                            \n                            <input type="tel" class="quiz-input" name="user-phone" placeholder="Номер телефона" required>\n                            <div class="error-message" id="phoneError">Пожалуйста, введите корректный номер телефона</div>\n                            \n                            <input type="email" class="quiz-input" name="user-email" placeholder="Электронная почта" required>\n                            <div class="error-message" id="emailError">Пожалуйста, введите корректный email</div>\n                            \n                            <div class="quiz-buttons">\n                                <button type="button" class="quiz-btn btn-secondary submit">Получить КП с идеями</button>\n                            </div>\n                        </div>\n                    </form>\n                ',this.bindCaptureFormEvents(e),e}},{key:"bindCaptureFormEvents",value:function(e){var t=this;e.querySelector(".quiz-btn.submit").addEventListener("click",function(){t.submitCaptureForm(e)}),e.querySelectorAll(".quiz-input").forEach(function(e){e.addEventListener("input",function(e){var t=e.target.nextElementSibling;t&&t.classList.contains("error-message")&&(t.style.display="none",e.target.classList.remove("error"))}),e.addEventListener("blur",function(e){t.validateCaptureField(e.target)})})}},{key:"validateCaptureField",value:function(e){var t=!0,n=e.value.trim(),r=e.nextElementSibling;if(!r||!r.classList.contains("error-message"))return!0;switch(e.name){case"user-name":n||(t=!1,r.textContent="Пожалуйста, введите ваше имя");break;case"user-phone":n?/^[\+]?[0-9\s\-\(\)]{10,}$/.test(n)||(t=!1,r.textContent="Пожалуйста, введите корректный номер телефона"):(t=!1,r.textContent="Пожалуйста, введите номер телефона");break;case"user-email":n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(t=!1,r.textContent="Пожалуйста, введите корректный email"):(t=!1,r.textContent="Пожалуйста, введите email")}return t?(r.style.display="none",e.classList.remove("error")):(r.style.display="block",e.classList.add("error")),this.updateCaptureButtonState(form),t}},{key:"updateCaptureButtonState",value:function(e){var t=e.querySelector(".quiz-btn.submit"),n=e.querySelectorAll(".quiz-input"),r=Array.from(n).every(function(e){var t=e.nextElementSibling;return!t||"none"===t.style.display});t.disabled=!r}},{key:"submitCaptureForm",value:function(e){var t=new FormData(e.querySelector("#captureForm"));t.get("user-name"),t.get("user-phone"),t.get("user-email"),this.answers,(new Date).toISOString(),alert("Спасибо! Ваши ответы приняты. Мы свяжемся с вами в ближайшее время для предоставления КП с идеями.")}}],t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();document.addEventListener("DOMContentLoaded",function(){new i})},920:(e,t,n)=>{"use strict";n.r(t)},921:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".catalog-grid");e&&function(e){var t,n,r,a,s,i=!1,o=0;function c(){Math.abs(o)>.5?(e.scrollLeft+=o,o*=.92,s=requestAnimationFrame(c)):(o=0,cancelAnimationFrame(s))}function u(s){if(i){var c=s.pageX-t;e.scrollLeft=n-c;var u=performance.now(),l=u-a;if(l>0){var d=e.scrollLeft;o=(d-r)/l*16,r=d}a=u}}function l(){i&&(i=!1,e.style.cursor="grab",e.style.scrollSnapType="",Math.abs(o)>1&&(s=requestAnimationFrame(c)),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",l))}function d(s){if(i){var c=s.touches[0],u=Math.abs(c.pageX-t),l=Math.abs(c.pageY-t);if(l>u&&l>10)return i=!1,void(e.style.scrollSnapType="");var d=c.pageX-t;e.scrollLeft=n-d;var p=performance.now(),m=p-a;if(m>0){var v=e.scrollLeft;o=(v-r)/m*16,r=v}a=p,s.preventDefault()}}function p(){i&&(i=!1,e.style.scrollSnapType="",Math.abs(o)>1&&(s=requestAnimationFrame(c)),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",p))}e.addEventListener("wheel",function(t){Math.abs(t.deltaY)>Math.abs(t.deltaX)||(e.scrollLeft+=t.deltaY,t.preventDefault())},{passive:!1}),e.addEventListener("mousedown",function(c){c.target.closest("button")||c.target.closest("a")||(cancelAnimationFrame(s),o=0,i=!0,e.style.cursor="grabbing",e.style.scrollSnapType="none",t=c.pageX,n=e.scrollLeft,r=e.scrollLeft,a=performance.now(),c.preventDefault(),c.stopPropagation(),document.addEventListener("mousemove",u),document.addEventListener("mouseup",l))}),e.addEventListener("touchstart",function(c){c.target.closest("button")||c.target.closest("a")||(cancelAnimationFrame(s),o=0,i=!0,e.style.scrollSnapType="none",t=c.touches[0].pageX,n=e.scrollLeft,r=e.scrollLeft,a=performance.now(),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",p))},{passive:!0}),e.addEventListener("contextmenu",function(e){i&&e.preventDefault()}),document.addEventListener("mouseleave",l),window.addEventListener("blur",l)}(e)})}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(920),n(120),n(921)})();