(()=>{var e={120:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentStep=1,this.totalSteps=5,this.answers={},this.init()},t=[{key:"init",value:function(){this.updateProgress(),this.bindEvents(),this.setMinDate()}},{key:"setMinDate",value:function(){var e=(new Date).toISOString().split("T")[0];document.querySelector('input[name="merch-deadline"]').min=e}},{key:"bindEvents",value:function(){var e=this;document.querySelectorAll(".quiz-btn.next").forEach(function(t){t.addEventListener("click",function(){return e.nextStep()})}),document.querySelector(".quiz-btn.submit").addEventListener("click",function(){return e.submitQuiz()}),document.querySelectorAll('.quiz-option input[type="checkbox"], .quiz-option input[type="radio"]').forEach(function(t){t.addEventListener("change",function(t){return e.handleOptionSelect(t.target)})}),document.querySelectorAll(".quiz-input").forEach(function(t){t.addEventListener("input",function(t){return e.handleInputChange(t.target)}),t.addEventListener("blur",function(t){return e.validateInput(t.target)})})}},{key:"handleOptionSelect",value:function(e){var t=e.closest(".quiz-option");"checkbox"===e.type?e.checked?t.classList.add("selected"):t.classList.remove("selected"):(t.closest(".quiz-options").querySelectorAll(".quiz-option").forEach(function(e){return e.classList.remove("selected")}),t.classList.add("selected")),this.updateButtonState()}},{key:"handleInputChange",value:function(e){var t=e.nextElementSibling;t&&t.classList.contains("error-message")&&(t.style.display="none",e.classList.remove("error"))}},{key:"validateInput",value:function(e){var t=!0,r=e.value.trim(),n=e.nextElementSibling;if(!n||!n.classList.contains("error-message"))return!0;switch(e.name){case"merch-circulation":(!r||parseInt(r)<50)&&(t=!1,n.textContent="Тираж должен быть не менее 50 шт");break;case"merch-deadline":r?new Date(r)<(new Date).setHours(0,0,0,0)&&(t=!1,n.textContent="Дата не может быть раньше сегодняшнего дня"):(t=!1,n.textContent="Пожалуйста, укажите дату")}return t?(n.style.display="none",e.classList.remove("error")):(n.style.display="block",e.classList.add("error")),this.updateButtonState(),t}},{key:"updateButtonState",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]')),t=e.querySelector(".quiz-btn.next"),r=e.querySelector(".quiz-btn.submit"),n=!1;switch(this.currentStep){case 1:case 2:n=e.querySelectorAll('input[type="checkbox"]:checked').length>0;break;case 3:n=!!e.querySelector('input[type="radio"]:checked');break;case 4:var i=e.querySelector('input[name="merch-circulation"]');n=i.value&&parseInt(i.value)>=50;break;case 5:var a=e.querySelector('input[name="merch-deadline"]');n=a.value&&new Date(a.value)>=(new Date).setHours(0,0,0,0)}t&&(t.disabled=!n),r&&(r.disabled=!n)}},{key:"collectAnswers",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]'));switch(this.currentStep){case 1:var t=Array.from(e.querySelectorAll('input[name="merch-for"]:checked')).map(function(e){return e.value});this.answers.merchFor=t;break;case 2:var r=Array.from(e.querySelectorAll('input[name="merch-event"]:checked')).map(function(e){return e.value});this.answers.merchEvent=r;break;case 3:var n=e.querySelector('input[name="merch-design"]:checked');this.answers.merchDesign=n?n.value:null;break;case 4:var i=e.querySelector('input[name="merch-circulation"]').value;this.answers.circulation=i;break;case 5:var a=e.querySelector('input[name="merch-deadline"]').value;this.answers.deadline=a}}},{key:"nextStep",value:function(){this.currentStep>=this.totalSteps||(this.collectAnswers(),this.currentStep++,this.showStep())}},{key:"prevStep",value:function(){this.currentStep<=1||(this.currentStep--,this.showStep())}},{key:"showStep",value:function(){document.querySelectorAll(".quiz-step").forEach(function(e){e.classList.remove("active")}),document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]')).classList.add("active"),this.updateProgress(),this.updateButtonState(),this.restoreAnswers()}},{key:"restoreAnswers",value:function(){var e=document.querySelector('.quiz-step[data-step="'.concat(this.currentStep,'"]'));switch(this.currentStep){case 1:this.answers.merchFor&&this.answers.merchFor.forEach(function(t){var r=e.querySelector('input[value="'.concat(t,'"]'));r&&(r.checked=!0,r.closest(".quiz-option").classList.add("selected"))});break;case 2:this.answers.merchEvent&&this.answers.merchEvent.forEach(function(t){var r=e.querySelector('input[value="'.concat(t,'"]'));r&&(r.checked=!0,r.closest(".quiz-option").classList.add("selected"))});break;case 3:if(this.answers.merchDesign){var t=e.querySelector('input[value="'.concat(this.answers.merchDesign,'"]'));t&&(t.checked=!0,t.closest(".quiz-option").classList.add("selected"))}break;case 4:this.answers.circulation&&(e.querySelector('input[name="merch-circulation"]').value=this.answers.circulation);break;case 5:this.answers.deadline&&(e.querySelector('input[name="merch-deadline"]').value=this.answers.deadline)}}},{key:"updateProgress",value:function(){var e=document.getElementById("progressFill"),t=(document.getElementById("progressText"),100-(this.currentStep-1)/(this.totalSteps-1)*100);e.style.width="calc(".concat(t,"% - 20%")}},{key:"submitQuiz",value:function(){this.collectAnswers(),r(r({},this.answers),{},{timestamp:(new Date).toISOString()}),this.showCaptureForm()}},{key:"showCaptureForm",value:function(){document.querySelector(".quiz-container").style.display="none";var e=this.createCaptureForm();document.body.appendChild(e)}},{key:"createCaptureForm",value:function(){var e=document.createElement("div");return e.className="quiz-container",e.innerHTML='\n                    <div class="quiz-progress">\n                        <div class="progress-bar">\n                            <div class="progress-fill" style="width: 0%"></div>\n                        </div>\n                        <div class="progress-text">Дополнительная информация</div>\n                    </div>\n\n                    <form id="captureForm">\n                        \x3c!-- Вопрос 6 - Контактные данные --\x3e\n                        <div class="quiz-step active" data-step="6">\n                            <h3 class="quiz-question">ВАШИ КОНТАКТНЫЕ ДАННЫЕ</h3>\n                            <input type="text" class="quiz-input" name="user-name" placeholder="Ваше имя" required>\n                            <div class="error-message" id="nameError">Пожалуйста, введите ваше имя</div>\n                            \n                            <input type="tel" class="quiz-input" name="user-phone" placeholder="Номер телефона" required>\n                            <div class="error-message" id="phoneError">Пожалуйста, введите корректный номер телефона</div>\n                            \n                            <input type="email" class="quiz-input" name="user-email" placeholder="Электронная почта" required>\n                            <div class="error-message" id="emailError">Пожалуйста, введите корректный email</div>\n                            \n                            <div class="quiz-buttons">\n                                <button type="button" class="quiz-btn btn-secondary submit">Получить КП с идеями</button>\n                            </div>\n                        </div>\n                    </form>\n                ',this.bindCaptureFormEvents(e),e}},{key:"bindCaptureFormEvents",value:function(e){var t=this;e.querySelector(".quiz-btn.submit").addEventListener("click",function(){t.submitCaptureForm(e)}),e.querySelectorAll(".quiz-input").forEach(function(e){e.addEventListener("input",function(e){var t=e.target.nextElementSibling;t&&t.classList.contains("error-message")&&(t.style.display="none",e.target.classList.remove("error"))}),e.addEventListener("blur",function(e){t.validateCaptureField(e.target)})})}},{key:"validateCaptureField",value:function(e){var t=!0,r=e.value.trim(),n=e.nextElementSibling;if(!n||!n.classList.contains("error-message"))return!0;switch(e.name){case"user-name":r||(t=!1,n.textContent="Пожалуйста, введите ваше имя");break;case"user-phone":r?/^[\+]?[0-9\s\-\(\)]{10,}$/.test(r)||(t=!1,n.textContent="Пожалуйста, введите корректный номер телефона"):(t=!1,n.textContent="Пожалуйста, введите номер телефона");break;case"user-email":r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||(t=!1,n.textContent="Пожалуйста, введите корректный email"):(t=!1,n.textContent="Пожалуйста, введите email")}return t?(n.style.display="none",e.classList.remove("error")):(n.style.display="block",e.classList.add("error")),this.updateCaptureButtonState(form),t}},{key:"updateCaptureButtonState",value:function(e){var t=e.querySelector(".quiz-btn.submit"),r=e.querySelectorAll(".quiz-input"),n=Array.from(r).every(function(e){var t=e.nextElementSibling;return!t||"none"===t.style.display});t.disabled=!n}},{key:"submitCaptureForm",value:function(e){var t=new FormData(e.querySelector("#captureForm"));t.get("user-name"),t.get("user-phone"),t.get("user-email"),this.answers,(new Date).toISOString(),alert("Спасибо! Ваши ответы приняты. Мы свяжемся с вами в ближайшее время для предоставления КП с идеями.")}}],t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();document.addEventListener("DOMContentLoaded",function(){new s})},920:(e,t,r)=>{"use strict";r.r(t)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(920),r(120)})();